<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koło fortuny</title>

<style>
body{
  font-family:sans-serif;
  background:#111827;
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  margin:0;
}

#wrapper{
  position:relative;
  width:350px;
  height:350px;
  margin-bottom:20px;
}

/* STRZAŁKA U GÓRY WSKAZUJĄCA W DÓŁ */
#arrow{
  position:absolute;
  left:50%;
  top:-25px;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:20px solid transparent;
  border-right:20px solid transparent;
  border-bottom:35px solid #ffd700;
  z-index:10;
}

#wheel{
  width:100%;
  height:100%;
  border-radius:50%;
  transition:transform 3.5s cubic-bezier(.2,.9,.3,1);
}

button{
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:#22d3ee;
  color:#022c3a;
  font-weight:bold;
  cursor:pointer;
}

#result{
  margin-top:15px;
  font-size:20px;
  font-weight:bold;
}
</style>

</head>
<body>

<h2>Koło fortuny – 8 pól</h2>

<div id="wrapper">
  <div id="arrow"></div>

  <!-- SVG KOŁA -->
  <svg id="wheel" viewBox="0 0 500 500">
    <g id="segments" transform="translate(250,250)"></g>
  </svg>
</div>

<button id="spin">Zakręć</button>
<div id="result">Wynik: —</div>


<script>
/* ---- KONFIG ---- */
const SEGMENTS = 8;
const R = 230;
const sliceAngle = 360 / SEGMENTS;
const colors = ["#ff6b6b","#4ecdc4","#ffe66d","#1a535c","#f7fff7","#ff9f1c","#2ec4b6","#e71d36"];

/* ---- RYSOWANIE KOŁA ---- */
const g = document.getElementById("segments");

for(let i=0;i<SEGMENTS;i++){
  const start = (i*sliceAngle - 90) * Math.PI/180;
  const end   = ((i+1)*sliceAngle - 90) * Math.PI/180;

  const x1 = Math.cos(start)*R;
  const y1 = Math.sin(start)*R;
  const x2 = Math.cos(end)*R;
  const y2 = Math.sin(end)*R;

  const p = document.createElementNS("http://www.w3.org/2000/svg","path");
  p.setAttribute("d",`M0 0 L ${x1} ${y1} A ${R} ${R} 0 0 1 ${x2} ${y2} Z`);
  p.setAttribute("fill",colors[i]);
  g.appendChild(p);

  const a  = (i*sliceAngle + sliceAngle/2 -90) * Math.PI/180;
  const tx = Math.cos(a)*(R*0.55);
  const ty = Math.sin(a)*(R*0.55);

  const t = document.createElementNS("http://www.w3.org/2000/svg","text");
  t.setAttribute("x",tx);
  t.setAttribute("y",ty);
  t.setAttribute("text-anchor","middle");
  t.setAttribute("font-size","30");
  t.setAttribute("font-weight","bold");
  t.setAttribute("fill","#000");
  t.textContent = i+1;
  g.appendChild(t);
}

/* ---- LOSOWANIE I OBRÓT ---- */
const wheel = document.getElementById("wheel");
const result = document.getElementById("result");
const btn = document.getElementById("spin");

let spinning = false;
let currentRotation = 0;

btn.onclick = () => {
  if(spinning) return;
  spinning = true;

  // losowy segment
  const chosen = Math.floor(Math.random()*SEGMENTS);

  // dodatkowe obroty
  const spins = 4 + Math.random()*3;
  const target = spins*360 + chosen*sliceAngle;

  currentRotation = (currentRotation + target) % 360;
  wheel.style.transform = `rotate(${currentRotation}deg)`;

  wheel.ontransitionend = () => {
    // KONWERSJA na numer segmentu pod strzałką:
    const final = (currentRotation % 360 + 360) % 360;
    const index = Math.floor((final + sliceAngle/2) / sliceAngle) % SEGMENTS;
    const number = index + 1;

    result.textContent = "Wynik: " + number;
    spinning = false;
  };
};
</script>

</body>
</html>

