let sliceCount = prizes.length;
let angleStep = 360 / sliceCount;

document.getElementById("spinBtn").onclick = function() {
    // losowy obrót koła + kilka pełnych obrotów
    let randomDeg = 3600 + Math.random() * 360; 
    wheel.style.transition = "transform 4s ease-out";
    wheel.style.transform = `rotate(${randomDeg}deg)`;

    document.getElementById("result").innerHTML = "Losuję...";
    document.getElementById("colorBox").style.background = "#fff";

    setTimeout(() => {
        // kąt końcowy w zakresie 0-360
        let finalDeg = randomDeg % 360;

        // wyliczenie indeksu segmentu pod wskaźnikiem
        let index = sliceCount - 1 - Math.floor(finalDeg / angleStep);

        // wylosowana nagroda i kolor
        let selectedPrize = prizes[index];
        let selectedColor = colors[index];

        document.getElementById("result").innerHTML = selectedPrize;
        document.getElementById("colorBox").style.background = selectedColor;

        // zapis historii
        let history = JSON.parse(localStorage.getItem("wheelHistory") || "[]");
        history.push({
            name: "Sylwia",
            prize: selectedPrize,
            color: selectedColor,
            time: new Date().toISOString()
        });
        localStorage.setItem("wheelHistory", JSON.stringify(history));
    }, 4000);
};
