<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Koło Fortuny</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 40px;
    }

    #wheel {
        width: 400px;
        height: 400px;
        border-radius: 50%;
        border: 8px solid #333;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
        transform: rotate(0deg);
        transition: transform 4s cubic-bezier(.17,.67,.12,1);
    }

    .slice {
        position: absolute;
        width: 50%;
        height: 50%;
        top: 50%;
        left: 50%;
        transform-origin: 0% 0%;
        background: #eee;
        border: 1px solid #ccc;
    }

    #arrow {
        width: 0; 
        height: 0; 
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-bottom: 35px solid red;
        margin: 0 auto 20px;
    }

    #spinBtn {
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
    }

    .legend {
        margin-top: 30px;
        text-align: left;
        width: 300px;
        margin-left: auto;
        margin-right: auto;
    }
</style>
</head>
<body>

<div id="arrow"></div>
<div id="wheel"></div>
<button id="spinBtn">Zakręć</button>

<div class="legend">
    <h3>Legenda:</h3>
    <p>1: Nagroda 1</p>
    <p>2: Nagroda 2</p>
    <p>3: Nagroda 3</p>
    <p>4: Nagroda 4</p>
    <p>5: Nagroda 5</p>
    <p>6: Nagroda 6</p>
    <p>7: Nagroda 7</p>
    <p>8: Nagroda 8 (niewylosowalna)</p>
</div>

<script>
const wheel = document.getElementById("wheel");
const btn = document.getElementById("spinBtn");

const numSlices = 8;
const angle = 360 / numSlices;

// Tworzenie segmentów koła
for (let i = 0; i < numSlices; i++) {
    const slice = document.createElement("div");
    slice.className = "slice";
    slice.style.transform = `rotate(${i * angle}deg) skewY(${90 - angle}deg)`;
    slice.style.background = `hsl(${i * 45}, 70%, 70%)`;
    slice.innerHTML = `<div style="transform: skewY(-${90 - angle}deg) rotate(${angle/2}deg); 
                        position:absolute; top:-100%; left:-10%; font-weight:bold;">
                        ${i+1}</div>`;
    wheel.appendChild(slice);
}

let currentRotation = 0;

btn.onclick = function () {
    // WYKLUCZENIE POLA 8
    const allowed = [1,2,3,4,5,6,7]; 
    const chosen = allowed[Math.floor(Math.random() * allowed.length)];

    // Obliczenie docelowego kąta
    const sliceAngle = 360 / numSlices;
    const targetAngle = (chosen - 1) * sliceAngle + (sliceAngle / 2);

    // Dodanie pełnych obrotów dla animacji
    const extraTurns = 5 * 360;
    const finalRotation = extraTurns - targetAngle;

    currentRotation = finalRotation;

    wheel.style.transform = `rotate(${finalRotation}deg)`;
};
</script>

</body>
</html>
